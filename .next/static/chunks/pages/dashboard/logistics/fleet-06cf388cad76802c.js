(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5369],{51350:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/logistics/fleet",function(){return i(47650)}])},47650:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return z}});var r=i(85893),n=i(67294),l=i(87357),s=i(67720),o=i(15861),d=i(98396),c=i(8425),a=i(8493),x=i(45697),h=i.n(x),p=i(45331),u=i(77533),j=i(93946),Z=i(51233),v=i(53219);let m=e=>{let{children:t,container:i,open:n,onClose:l}=e;return(0,r.jsxs)(u.ZP,{anchor:"left",hideBackdrop:!0,ModalProps:{container:i,sx:{pointerEvents:"none",position:"absolute"}},onClose:l,open:n,PaperProps:{sx:{pointerEvents:"auto",position:"absolute"}},SlideProps:{container:i},variant:"temporary",children:[(0,r.jsxs)(Z.Z,{alignItems:"flex-center",direction:"row",justifyContent:"space-between",sx:{p:2},children:[(0,r.jsx)(o.Z,{variant:"h5",children:"Fleet"}),(0,r.jsx)(j.Z,{onClick:l,children:(0,r.jsx)(v.Z,{children:(0,r.jsx)(p.Z,{})})})]}),t]})};m.propTypes={children:h().node,container:h().any,onClose:h().func,open:h().bool};var f=i(44832),b=i(87952),y=i(49990),g=i(57922),A=i(88441),C=i(36599),S=i(51221),k=i(72162),w=i(17494),V=i(7921),D=i(77451),M=i(9601);let N=e=>{let{onDeselect:t,onSelect:i,selected:d,vehicle:c}=e,a=(0,n.useCallback)(()=>{d?null==t||t():null==i||i(c.id)},[t,i,d,c]);return(0,r.jsxs)(Z.Z,{component:"li",children:[(0,r.jsxs)(y.Z,{sx:{alignItems:"center",justifyContent:"flex-start",p:2,textAlign:"left",width:"100%"},onClick:a,children:[(0,r.jsx)(b.Z,{sx:{mr:2},children:(0,r.jsx)(v.Z,{children:(0,r.jsx)(f.Z,{})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{children:c.id}),(0,r.jsx)(o.Z,{color:"text.secondary",variant:"body2",children:c.location})]})]}),(0,r.jsxs)(g.Z,{in:d,children:[(0,r.jsx)(s.Z,{}),(0,r.jsxs)(l.Z,{sx:{p:2},children:[(0,r.jsxs)(Z.Z,{spacing:1,children:[(0,r.jsx)(o.Z,{color:"text.secondary",variant:"caption",children:"Temperature (good)"}),(0,r.jsxs)(Z.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,r.jsx)(A.Z,{value:8,sx:{flexGrow:1},variant:"determinate"}),(0,r.jsx)(o.Z,{color:"text.secondary",variant:"body2",children:c.temp})]})]}),(0,r.jsxs)(C.Z,{position:"right",sx:{px:3,["& .".concat(V.Z.root,":before")]:{flex:0,padding:0}},children:[(0,r.jsxs)(D.Z,{children:[(0,r.jsxs)(M.Z,{children:[(0,r.jsx)(w.Z,{color:"primary"}),(0,r.jsx)(S.Z,{})]}),(0,r.jsx)(k.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{variant:"body2",children:"Tracking Number Created"}),(0,r.jsx)(o.Z,{color:"text.secondary",variant:"caption",children:c.startedAt})]})})]}),(0,r.jsxs)(D.Z,{children:[(0,r.jsxs)(M.Z,{children:[(0,r.jsx)(w.Z,{color:"primary"}),(0,r.jsx)(S.Z,{})]}),(0,r.jsx)(k.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{variant:"body2",children:"Out for Delivery"}),(0,r.jsx)(o.Z,{color:"text.secondary",variant:"caption",children:c.departedAt})]})})]}),(0,r.jsxs)(D.Z,{children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(w.Z,{color:"primary"})}),(0,r.jsx)(k.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{variant:"body2",children:"Arrived"}),(0,r.jsx)(o.Z,{color:"text.secondary",variant:"caption",children:c.arrivedAt})]})})]})]})]})]})]})};N.propTypes={onDeselect:h().func,onSelect:h().func,selected:h().bool,vehicle:h().object.isRequired};let _=e=>{let{onVehicleDeselect:t,onVehicleSelect:i,currentVehicleId:n,vehicles:l=[]}=e;return(0,r.jsx)(Z.Z,{component:"ul",divider:(0,r.jsx)(s.Z,{}),sx:{borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,listStyle:"none",m:0,p:0},children:l.map(e=>{let l=!!n&&n===e.id;return(0,r.jsx)(N,{onDeselect:t,onSelect:i,selected:l,vehicle:e},e.id)})})};_.propTypes={currentVehicleId:h().string,onVehicleDeselect:h().func,onVehicleSelect:h().func,vehicles:h().array};var I=i(61108),T=i(2734),E=i(38725);let P={latitude:40.74281576586265,longitude:-73.99277240443942,zoom:11},O=e=>{let{onVehicleSelect:t,currentVehicleId:i,vehicles:s=[]}=e,d=(0,T.Z)(),c=(0,n.useRef)(null),[a]=(0,n.useState)(()=>{if(!i)return P;{let e=s.find(e=>e.id===i);return e?{latitude:e.latitude,longitude:e.longitude,zoom:13}:P}}),x=(0,n.useCallback)(()=>{let e;let t=c.current;if(!t)return;let r=s.find(e=>e.id===i);e=r?{center:[r.longitude,r.latitude]}:{center:[P.longitude,P.latitude]},t.flyTo(e)},[s,i]);(0,n.useEffect)(()=>{x()},[s,i]);let h="dark"===d.palette.mode?"mapbox://styles/mapbox/dark-v9":"mapbox://styles/mapbox/light-v9";return E.jZ.apiKey?(0,r.jsx)(I.ZP,{attributionControl:!1,initialViewState:a,mapStyle:h,mapboxAccessToken:E.jZ.apiKey,ref:c,maxZoom:20,minZoom:11,children:s.map(e=>(0,r.jsx)(I.Jx,{latitude:e.latitude,longitude:e.longitude,onClick:()=>null==t?void 0:t(e.id),children:(0,r.jsx)(l.Z,{sx:{height:50,width:50,...e.id===i&&{filter:e=>"drop-shadow(0px 0px 8px ".concat(e.palette.primary.main,")")},"& img":{height:"100%"}},children:(0,r.jsx)("img",{src:"/assets/car-marker.png"})})},e.id))}):(0,r.jsxs)(l.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:[(0,r.jsx)(l.Z,{sx:{mb:3},children:(0,r.jsx)(l.Z,{component:"img",src:"/assets/errors/error-404.png",sx:{width:200,maxWidth:"100%"}})}),(0,r.jsx)(o.Z,{variant:"h5",sx:{mb:1},children:"Map cannot be loaded"}),(0,r.jsx)(o.Z,{color:"text.secondary",variant:"subtitle2",children:"Mapbox API Key is not configured."})]})};O.propTypes={currentVehicleId:h().string,onVehicleSelect:h().func,vehicles:h().array};var R=i(11347),Y=i(66242);let L=e=>{let{onDrawerOpen:t}=e;return(0,r.jsx)(l.Z,{sx:{left:0,p:2,pointerEvents:"none",position:"absolute",top:0,width:"100%",zIndex:10},children:(0,r.jsx)(Y.Z,{sx:{p:2,pointerEvents:"auto"},children:(0,r.jsx)(j.Z,{onClick:t,children:(0,r.jsx)(v.Z,{children:(0,r.jsx)(R.Z,{})})})})})};L.propTypes={onDrawerOpen:h().func};let B=()=>[{id:"VOL-653CD2",location:"New York, NY, USA",latitude:40.74759625348667,longitude:-74.00422032706065,temp:"8\xb0C",startedAt:"Sep 01, 7:53 AM",departedAt:"Sep 01, 8:02 AM",arrivedAt:"Sep 01, 8:18 AM"},{id:"VOL-653CD3",location:"New York, NY, USA",latitude:40.75374208987527,longitude:-74.02878378307403,temp:"6\xb0C",startedAt:"Sep 01, 8:21 AM",departedAt:"Sep 01, 8:36 AM",arrivedAt:"Sep 01, 9:54 AM"},{id:"VOL-653CD4",location:"New York, NY, USA",latitude:40.765281069832085,longitude:-73.96392724511145,temp:"8\xb0C",startedAt:"Sep 01, 6:34 AM",departedAt:"Sep 01, 7:41 AM",arrivedAt:"Sep 01, 9:20 AM"}],F=()=>{var e;let t=(0,n.useRef)(null),i=(0,d.Z)(e=>e.breakpoints.up("md")),a=B(),[x,h]=(0,n.useState)(!1),[p,u]=(0,n.useState)(null===(e=a[0])||void 0===e?void 0:e.id),j=(0,n.useCallback)(e=>{u(e)},[]),Z=(0,n.useCallback)(()=>{u(void 0)},[]),v=(0,n.useCallback)(()=>{h(!0)},[]),f=(0,n.useCallback)(()=>{h(!1)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.p,{title:"Dashboard: Logistics Fleet"}),(0,r.jsx)(s.Z,{}),(0,r.jsxs)(l.Z,{component:"main",ref:t,sx:{display:"flex",flex:"1 1 auto",overflow:"hidden",position:"relative"},children:[i&&(0,r.jsxs)(l.Z,{sx:{borderRightColor:"divider",borderRightStyle:"solid",borderRightWidth:1,flex:"0 0 400px"},children:[(0,r.jsx)(l.Z,{sx:{p:2},children:(0,r.jsx)(o.Z,{variant:"h5",children:"Fleet"})}),(0,r.jsx)(_,{currentVehicleId:p,onVehicleDeselect:Z,onVehicleSelect:j,vehicles:a})]}),(0,r.jsxs)(l.Z,{sx:{flex:"1 1 auto",overflow:"hidden",position:"relative"},children:[!i&&(0,r.jsx)(L,{onDrawerOpen:v}),(0,r.jsx)(O,{currentVehicleId:p,onVehicleSelect:j,vehicles:a})]})]}),!i&&(0,r.jsx)(m,{container:t.current,onClose:f,open:x,children:(0,r.jsx)(_,{currentVehicleId:p,onVehicleDeselect:Z,onVehicleSelect:j,vehicles:a})})]})};F.getLayout=e=>(0,r.jsx)(a.A,{children:e});var z=F}},function(e){e.O(0,[4310,8471,7176,3155,3852,3473,4411,209,7974,9837,4723,865,9774,2888,179],function(){return e(e.s=51350)}),_N_E=e.O()}]);