(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3259],{65876:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/calendar",function(){return n(6048)}])},48050:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var a=n(67294),r=n(12808);let l=()=>{(0,a.useEffect)(()=>{r.w.push({event:"page_view"})},[])}},6048:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eg}});var a=n(85893),r=n(67294),l=n(43907),i=n(16993),o=n(39897),s=n(17292),d=n(61029),c=n(25184),u=n(87357),p=n(66242),h=n(65582),g=n(51233),v=n(98396),f=n(8425),y=n(52942),m=n(48050),b=n(8493),Z=n(45697),x=n.n(Z),C=n(86501),w=n(58545),D=n(16310),j=n(17417),E=n(72591),k=n(11057),T=n(42492),S=n(67720),I=n(50480),A=n(56815),W=n(93946),M=n(53219),P=n(45843),R=n(93155),_=n(15861),F=n(93730),G=n(10459),O=n(93649),V=n(35634),z=n(77349),B=n(83894),N=n(37042),q=n(4543),H=n(69119),X=n(7069);let J=new Date,L=[{id:"5e8882e440f6322fa399eeb8",allDay:!1,description:"Inform about new contract",end:(0,N.Z)((0,q.Z)((0,X.Z)(J,6),0),19).getTime(),start:(0,N.Z)((0,q.Z)((0,X.Z)(J,6),30),17).getTime(),title:"Call Samantha"},{id:"5e8882eb5f8ec686220ff131",allDay:!1,description:"Discuss about new partnership",end:(0,N.Z)((0,q.Z)((0,z.Z)(J,2),30),15).getTime(),start:(0,N.Z)((0,q.Z)((0,z.Z)(J,2),0),12).getTime(),title:"Meet with IBM"},{id:"5e8882f1f0c9216396e05a9b",allDay:!1,description:"Prepare docs",end:(0,N.Z)((0,q.Z)((0,z.Z)(J,5),0),12).getTime(),start:(0,N.Z)((0,q.Z)((0,z.Z)(J,5),0),8).getTime(),title:"SCRUM Planning"},{id:"5e8882f6daf81eccfa40dee2",allDay:!0,description:"Meet with team to discuss",end:(0,H.Z)((0,X.Z)(J,11)).getTime(),start:(0,B.Z)((0,X.Z)(J,12)).getTime(),title:"Begin SEM"},{id:"5e8882fcd525e076b3c1542c",allDay:!1,color:"#F79009",description:"Sorry, John!",end:(0,N.Z)((0,q.Z)((0,z.Z)(J,3),31),7).getTime(),start:(0,N.Z)((0,q.Z)((0,z.Z)(J,3),30),7).getTime(),title:"Fire John"},{id:"5e888302e62149e4b49aa609",allDay:!1,color:"#F04438",description:"Discuss about the new project",end:(0,N.Z)((0,q.Z)((0,X.Z)(J,6),30),9).getTime(),start:(0,N.Z)((0,q.Z)((0,X.Z)(J,6),0),9).getTime(),title:"Call Alex"},{id:"5e88830672d089c53c46ece3",allDay:!1,color:"#F04438",description:"Get a new quote for the payment processor",end:(0,N.Z)((0,q.Z)(J,30),17).getTime(),start:(0,N.Z)((0,q.Z)(J,30),15).getTime(),title:"Visit Samantha"}],U={events:L},K=new class{getEvents(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],Promise.resolve((0,V.p)(U.events))}createEvent(e){let{allDay:t,description:n,end:a,start:r,title:l}=e;return new Promise((e,i)=>{try{let i=(0,V.p)(U.events),o={id:(0,O.h)(),allDay:t,description:n,end:a,start:r,title:l};i.push(o),U.events=i,e((0,V.p)(o))}catch(e){console.error("[Calendar Api]: ",e),i(Error("Internal server error"))}})}updateEvent(e){let{eventId:t,update:n}=e;return new Promise((e,a)=>{try{let r=(0,V.p)(U.events),l=r.find(e=>e.id===t);if(!l){a(Error("Event not found"));return}Object.assign(l,n),U.events=r,e((0,V.p)(l))}catch(e){console.error("[Calendar Api]: ",e),a(Error("Internal server error"))}})}deleteEvent(e){let{eventId:t}=e;return new Promise((e,n)=>{try{let a=(0,V.p)(U.events),r=a.find(e=>e.id===t);if(!r){n(Error("Event not found"));return}a=a.filter(e=>e.id!==t),U.events=a,e(!0)}catch(e){console.error("[Calendar Api]: ",e),n(Error("Internal server error"))}})}};var Q=n(57446);let Y={createEvent:e=>async t=>{let n=await K.createEvent(e);t(Q.t.actions.createEvent(n))},deleteEvent:e=>async t=>{await K.deleteEvent(e),t(Q.t.actions.deleteEvent(e.eventId))},getEvents:()=>async e=>{let t=await K.getEvents();e(Q.t.actions.getEvents(t))},updateEvent:e=>async t=>{let n=await K.updateEvent(e);t(Q.t.actions.updateEvent(n))}},$=(e,t)=>(0,r.useMemo)(()=>e?{allDay:e.allDay||!1,color:e.color||"",description:e.description||"",end:e.end?new Date(e.end):(0,w.Z)(new Date,30),start:e.start?new Date(e.start):new Date,title:e.title||"",submit:null}:t?{allDay:!1,color:"",description:"",end:new Date(t.end),start:new Date(t.start),title:"",submit:null}:{allDay:!1,color:"",description:"",end:(0,w.Z)(new Date,30),start:new Date,title:"",submit:null},[e,t]),ee=D.Ry({allDay:D.Xg(),description:D.Z_().max(5e3),end:D.hT(),start:D.hT(),title:D.Z_().max(255).required("Title is required")}),et=e=>{let{action:t="create",event:n,onAddComplete:l,onClose:i,onDeleteComplete:o,onEditComplete:s,open:d=!1,range:c}=e,p=(0,G.I0)(),h=$(n,c),v=(0,j.TA)({enableReinitialize:!0,initialValues:h,validationSchema:ee,onSubmit:async(e,a)=>{try{let a={allDay:e.allDay,description:e.description,end:e.end.getTime(),start:e.start.getTime(),title:e.title};"update"===t?(await p(Y.updateEvent({eventId:n.id,update:a})),C.ZP.success("Event updated")):(await p(Y.createEvent(a)),C.ZP.success("Event added")),"update"===t?null==s||s():null==l||l()}catch(e){console.error(e),C.ZP.error("Something went wrong!"),a.setStatus({success:!1}),a.setErrors({submit:e.message}),a.setSubmitting(!1)}}}),f=(0,r.useCallback)(e=>{v.setFieldValue("start",e),v.values.end&&e&&e>v.values.end&&v.setFieldValue("end",e)},[v]),y=(0,r.useCallback)(e=>{v.setFieldValue("end",e),v.values.start&&e&&e<v.values.start&&v.setFieldValue("start",e)},[v]),m=(0,r.useCallback)(async()=>{if(n)try{await p(Y.deleteEvent({eventId:n.id})),null==o||o()}catch(e){console.error(e)}},[p,n,o]);return(0,a.jsx)(T.Z,{fullWidth:!0,maxWidth:"sm",onClose:i,open:d,children:(0,a.jsxs)("form",{onSubmit:v.handleSubmit,children:[(0,a.jsx)(u.Z,{sx:{p:3},children:(0,a.jsx)(_.Z,{align:"center",gutterBottom:!0,variant:"h5",children:n?"Edit Event":"Add Event"})}),(0,a.jsxs)(g.Z,{spacing:2,sx:{p:3},children:[(0,a.jsx)(R.Z,{error:!!(v.touched.title&&v.errors.title),fullWidth:!0,helperText:v.touched.title&&v.errors.title,label:"Title",name:"title",onBlur:v.handleBlur,onChange:v.handleChange,value:v.values.title}),(0,a.jsx)(R.Z,{error:!!(v.touched.description&&v.errors.description),fullWidth:!0,helperText:v.touched.description&&v.errors.description,label:"Description",name:"description",onBlur:v.handleBlur,onChange:v.handleChange,value:v.values.description}),(0,a.jsx)(I.Z,{control:(0,a.jsx)(P.Z,{checked:v.values.allDay,name:"allDay",onChange:v.handleChange}),label:"All day"}),(0,a.jsx)(F.x,{label:"Start date",onChange:f,value:v.values.start}),(0,a.jsx)(F.x,{label:"End date",onChange:y,value:v.values.end}),!!(v.touched.end&&v.errors.end)&&(0,a.jsx)(A.Z,{error:!0,children:v.errors.end})]}),(0,a.jsx)(S.Z,{}),(0,a.jsxs)(g.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:1,sx:{p:2},children:[n&&(0,a.jsx)(W.Z,{onClick:()=>m(),children:(0,a.jsx)(M.Z,{children:(0,a.jsx)(E.Z,{})})}),(0,a.jsxs)(g.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,a.jsx)(k.Z,{color:"inherit",onClick:i,children:"Cancel"}),(0,a.jsx)(k.Z,{disabled:v.isSubmitting,type:"submit",variant:"contained",children:"Confirm"})]})]})]})})};et.propTypes={action:x().oneOf(["create","update"]),event:x().object,onAddComplete:x().func,onClose:x().func,onDeleteComplete:x().func,onEditComplete:x().func,open:x().bool,range:x().object};var en=n(32912),ea=n(22390),er=n(27264),el=n(10216);let ei=[{label:"Month",value:"dayGridMonth"},{label:"Week",value:"timeGridWeek"},{label:"Day",value:"timeGridDay"},{label:"Agenda",value:"listWeek"}],eo=e=>{let{date:t,onAddClick:n,onDateNext:l,onDatePrev:i,onDateToday:o,onViewChange:s,view:d,...c}=e,u=(0,v.Z)(e=>e.breakpoints.up("md")),p=(0,r.useCallback)(e=>{null==s||s(e.target.value)},[s]),h=(0,en.Z)(t,"MMMM"),f=(0,en.Z)(t,"y"),y=(0,r.useMemo)(()=>u?ei:ei.filter(e=>["timeGridDay","listWeek"].includes(e.value)),[u]);return(0,a.jsxs)(g.Z,{alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",flexDirection:{xs:"column",md:"row"},spacing:3,sx:{px:3},...c,children:[(0,a.jsxs)(g.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,a.jsx)(_.Z,{variant:"h5",children:h}),(0,a.jsx)(_.Z,{sx:{fontWeight:400},variant:"h5",children:f})]}),(0,a.jsxs)(g.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,a.jsx)(W.Z,{onClick:i,children:(0,a.jsx)(M.Z,{children:(0,a.jsx)(ea.Z,{})})}),(0,a.jsx)(W.Z,{onClick:l,children:(0,a.jsx)(M.Z,{children:(0,a.jsx)(er.Z,{})})}),(0,a.jsx)(R.Z,{label:"View",name:"view",onChange:p,select:!0,SelectProps:{native:!0},size:"small",sx:{minWidth:120,order:{xs:-1,md:0}},value:d,children:y.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)(k.Z,{onClick:n,startIcon:(0,a.jsx)(M.Z,{children:(0,a.jsx)(el.Z,{})}),sx:{width:{xs:"100%",md:"auto"}},variant:"contained",children:"New Event"})]})]})};eo.propTypes={children:x().node,date:x().instanceOf(Date).isRequired,onAddClick:x().func,onDateNext:x().func,onDatePrev:x().func,onDateToday:x().func,onViewChange:x().func,view:x().oneOf(["dayGridMonth","timeGridWeek","timeGridDay","listWeek"]).isRequired};var es=n(2101),ed=n(90948);let ec=(0,ed.ZP)("div")(e=>{let{theme:t}=e;return{"& .fc-license-message":{display:"none"},"& .fc":{"--fc-bg-event-opacity":1,"--fc-border-color":t.palette.divider,"--fc-daygrid-event-dot-width":"10px","--fc-event-bg-color":t.palette.primary.main,"--fc-event-border-color":t.palette.primary.main,"--fc-event-text-color":t.palette.primary.contrastText,"--fc-list-event-hover-bg-color":t.palette.background.default,"--fc-neutral-bg-color":t.palette.background.default,"--fc-page-bg-color":t.palette.background.default,"--fc-today-bg-color":(0,es.Fq)(t.palette.primary.main,.25),color:t.palette.text.primary,fontFamily:t.typography.fontFamily},"& .fc .fc-col-header-cell-cushion":{paddingBottom:"10px",paddingTop:"10px",fontSize:t.typography.overline.fontSize,fontWeight:t.typography.overline.fontWeight,letterSpacing:t.typography.overline.letterSpacing,lineHeight:t.typography.overline.lineHeight,textTransform:t.typography.overline.textTransform},"& .fc .fc-day-other .fc-daygrid-day-top":{color:t.palette.text.secondary},"& .fc-daygrid-event":{borderRadius:t.shape.borderRadius,padding:"0px 4px",fontSize:t.typography.subtitle2.fontSize,fontWeight:t.typography.subtitle2.fontWeight,lineHeight:t.typography.subtitle2.lineHeight},"& .fc-daygrid-block-event .fc-event-time":{fontSize:t.typography.body2.fontSize,fontWeight:t.typography.body2.fontWeight,lineHeight:t.typography.body2.lineHeight},"& .fc-daygrid-day-frame":{padding:"12px"},"& .fc-scrollgrid":{borderColor:"transparent"},"& .fc-scrollgrid td:last-of-type":{borderRightColor:"transparent"},'& .fc-scrollgrid-section.fc-scrollgrid-section-body td[role="presentation"]':{borderBottomColor:"transparent"},'& [role="row"]:last-of-type td':{borderBottomColor:"transparent"},'& th[role="presentation"]':{borderRightColor:"transparent"},"& .fc-list":{borderColor:"transparent"}}}),eu=()=>{let e=(0,G.I0)(),t=(0,G.v9)(e=>e.calendar.events),n=(0,r.useCallback)(()=>{e(Y.getEvents())},[e]);return(0,r.useEffect)(()=>{n()},[]),t},ep=(e,t)=>(0,r.useMemo)(()=>{if(t)return e.find(e=>e.id===t.eventId)},[t,e]),eh=()=>{var e;let t=(0,G.I0)(),n=(0,r.useRef)(null),b=eu(),Z=(0,v.Z)(e=>e.breakpoints.up("md")),[x,C]=(0,r.useState)(new Date),[w,D]=(0,r.useState)(Z?"timeGridDay":"dayGridMonth"),j=(0,y.R)(),E=(0,y.R)(),k=ep(b,E.data);(0,m.a)();let T=(0,r.useCallback)(()=>{let e=n.current;if(e){let t=e.getApi(),n=Z?"dayGridMonth":"timeGridDay";t.changeView(n),D(n)}},[n,Z]);(0,r.useEffect)(()=>{T()},[Z]);let S=(0,r.useCallback)(e=>{let t=n.current;if(t){let n=t.getApi();n.changeView(e),D(e)}},[]),I=(0,r.useCallback)(()=>{let e=n.current;if(e){let t=e.getApi();t.today(),C(t.getDate())}},[]),A=(0,r.useCallback)(()=>{let e=n.current;if(e){let t=e.getApi();t.prev(),C(t.getDate())}},[]),W=(0,r.useCallback)(()=>{let e=n.current;if(e){let t=e.getApi();t.next(),C(t.getDate())}},[]),M=(0,r.useCallback)(()=>{j.handleOpen()},[j]),P=(0,r.useCallback)(e=>{let t=n.current;if(t){let e=t.getApi();e.unselect()}j.handleOpen({range:{start:e.start.getTime(),end:e.end.getTime()}})},[j]),R=(0,r.useCallback)(e=>{E.handleOpen({eventId:e.event.id})},[E]),_=(0,r.useCallback)(async e=>{let{event:n}=e;try{var a,r;await t(Y.updateEvent({eventId:n.id,update:{allDay:n.allDay,start:null===(a=n.start)||void 0===a?void 0:a.getTime(),end:null===(r=n.end)||void 0===r?void 0:r.getTime()}}))}catch(e){console.error(e)}},[t]),F=(0,r.useCallback)(async e=>{let{event:n}=e;try{var a,r;await t(Y.updateEvent({eventId:n.id,update:{allDay:n.allDay,start:null===(a=n.start)||void 0===a?void 0:a.getTime(),end:null===(r=n.end)||void 0===r?void 0:r.getTime()}}))}catch(e){console.error(e)}},[t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.p,{title:"Dashboard: Calendar"}),(0,a.jsx)(u.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,a.jsx)(h.Z,{maxWidth:"xl",children:(0,a.jsxs)(g.Z,{spacing:3,children:[(0,a.jsx)(eo,{date:x,onAddClick:M,onDateNext:W,onDatePrev:A,onDateToday:I,onViewChange:S,view:w}),(0,a.jsx)(p.Z,{children:(0,a.jsx)(ec,{children:(0,a.jsx)(l.Z,{allDayMaintainDuration:!0,dayMaxEventRows:3,droppable:!0,editable:!0,eventClick:R,eventDisplay:"block",eventDrop:F,eventResizableFromStart:!0,eventResize:_,events:b,headerToolbar:!1,height:800,initialDate:x,initialView:w,plugins:[i.Z,o.ZP,s.Z,d.Z,c.Z],ref:n,rerenderDelay:10,select:P,selectable:!0,weekends:!0})})})]})})}),(0,a.jsx)(et,{action:"create",onAddComplete:j.handleClose,onClose:j.handleClose,open:j.open,range:null===(e=j.data)||void 0===e?void 0:e.range}),(0,a.jsx)(et,{action:"update",event:k,onClose:E.handleClose,onDeleteComplete:E.handleClose,onEditComplete:E.handleClose,open:E.open})]})};eh.getLayout=e=>(0,a.jsx)(b.A,{children:e});var eg=eh},35634:function(e,t,n){"use strict";n.d(t,{p:function(){return function e(t){return"object"!=typeof t||null===t?t:t instanceof Date?new Date(t.getTime()):t instanceof Array?t.reduce((t,n,a)=>(t[a]=e(n),t),[]):t instanceof Object?Object.keys(t).reduce((n,a)=>(n[a]=e(t[a]),n),{}):void 0}}})}},function(e){e.O(0,[1069,4310,8471,7176,3155,3852,3473,4411,209,7974,9118,148,6886,7029,3366,5615,865,9774,2888,179],function(){return e(e.s=65876)}),_N_E=e.O()}]);