(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4766],{7690:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/kanban",function(){return a(79293)}])},48050:function(e,n,a){"use strict";a.d(n,{a:function(){return s}});var r=a(67294),t=a(12808);let s=()=>{(0,r.useEffect)(()=>{t.w.push({event:"page_view"})},[])}},79293:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return eU}});var r=a(85893),t=a(67294),s=a(15948),l=a(86501),i=a(87357),o=a(51233),c=a(15861),d=a(8425),u=a(48050),h=a(8493),m=a(45697),p=a.n(m),k=a(32912),b=a(91296),x=a.n(b),f=a(97512),g=a(732),C=a(28923),j=a(10216),Z=a(45331),v=a(87952),I=a(51107),w=a(11057),y=a(87918),S=a(67720),T=a(77533),P=a(27400),E=a(93946),A=a(79332),R=a(53219),D=a(40044),z=a(86517),O=a(98396),W=a(21991),M=a(10459),K=a(93649),q=a(35634),U=a(77349),B=a(7069);let F=new Date,_={members:[{id:"5e86809283e28b96d2d38537",avatar:"/assets/avatars/avatar-anika-visser.png",name:"Anika Visser"},{id:"5e887a62195cc5aef7e8ca5d",avatar:"/assets/avatars/avatar-marcus-finn.png",name:"Marcus Finn"},{id:"5e887ac47eed253091be10cb",avatar:"/assets/avatars/avatar-carson-darrin.png",name:"Carson Darrin"},{id:"5e887b209c28ac3dd97f6db5",avatar:"/assets/avatars/avatar-fran-perez.png",name:"Fran Perez"},{id:"5e887b7602bdbc4dbb234b27",avatar:"/assets/avatars/avatar-jie-yan-song.png",name:"Jie Yan Song"}],columns:[{id:"5e849c39325dc5ef58e5a5db",taskIds:["5e849c8708bd72683b454747","5e849c90fabe1f1f4b3557f6","5e849c977ef6265938bfd90b","5e849c9e34ee93bc7255c599"],name:"Todo"},{id:"5e849c2b38d238c33e516755",taskIds:["5e849ca7d063dc3830d4b49c","5e849cb5d0c6e8894451fdfa"],name:"Progress"},{id:"5e849c2b38d238c33e5146755",taskIds:[],name:"Done"}],tasks:[{id:"5e849c8708bd72683b454747",assigneesIds:["5e887a62195cc5aef7e8ca5d"],attachments:[{id:"7191325744eca06bc6ad2219",type:"image",url:"/assets/covers/abstract-1-4x3-small.png"}],authorId:"5e86809283e28b96d2d38537",checklists:[{id:"5e84a8175c48d3f5b1d01972",name:"Update overview page",checkItems:[{id:"5e85af37da584c5e4bd8a06c",name:"Prepare sketch",state:"complete"}]}],comments:[{id:"15e849c5a35d4dff4f88ebff6",authorId:"5e887ac47eed253091be10cb",createdAt:(0,B.Z)(F,5).getTime(),message:"This is a comment"}],columnId:"5e849c39325dc5ef58e5a5db",description:"Duis condimentum lacus finibus felis pellentesque, ac auctor nibh fermentum. Duis sed dui ante. Phasellus id eros tincidunt, dictum lorem vitae, pellentesque sem. Aenean eu enim sit amet mauris rhoncus mollis. Sed enim turpis, porta a felis et, luctus faucibus nisi. Phasellus et metus fermentum, ultrices arcu aliquam, facilisis justo. Cras nunc nunc, elementum sed euismod ut, maximus eget nibh. Phasellus condimentum lorem neque. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Fusce sagittis pharetra eleifend. Suspendisse potenti.",due:(0,U.Z)(F,7).getTime(),isSubscribed:!1,labels:["Business","Design"],name:"Call with sales of HubSpot"},{id:"5e849c90fabe1f1f4b3557f6",assigneesIds:["5e887b209c28ac3dd97f6db5","5e887a62195cc5aef7e8ca5d"],attachments:[],authorId:"5e887b209c28ac3dd97f6db5",checklists:[],columnId:"5e849c39325dc5ef58e5a5db",comments:[],description:"We are looking for vue experience and of course node js strong knowledge",due:(0,U.Z)(F,6).getTime(),isSubscribed:!0,labels:[],name:"Interview for the Asis. Sales Manager"},{id:"5e849c977ef6265938bfd90b",assigneesIds:[],attachments:[],authorId:"5e887b7602bdbc4dbb234b27",checklists:[],columnId:"5e849c39325dc5ef58e5a5db",comments:[],description:"We need to make it aggressive with pricing because it’s in their interest to acquire us",due:null,isSubscribed:!1,labels:[],name:"Change the height of the top bar because it looks too chunky"},{id:"5e849c9e34ee93bc7255c599",assigneesIds:["5e887ac47eed253091be10cb","5e86809283e28b96d2d38537"],attachments:[],authorId:"5e887a62195cc5aef7e8ca5d",checklists:[],columnId:"5e849c39325dc5ef58e5a5db",comments:[],description:"We need to make it aggressive with pricing because it’s in their interest to acquire us",due:null,isSubscribed:!1,labels:[],name:"Integrate Stripe API"},{id:"5e849ca7d063dc3830d4b49c",assigneesIds:["5e887a62195cc5aef7e8ca5d"],attachments:[],authorId:"5e887ac47eed253091be10cb",checklists:[],columnId:"5e849c2b38d238c33e516755",comments:[],description:"We need to make it aggressive with pricing because it’s in their interest to acquire us",due:null,isSubscribed:!0,labels:[],name:"Update the customer API for payments"},{id:"5e849cb5d0c6e8894451fdfa",assigneesIds:[],attachments:[],authorId:"5e887ac47eed253091be10cb",checklists:[],columnId:"5e849c2b38d238c33e516755",comments:[],description:"We need to make it aggressive with pricing because it’s in their interest to acquire us",due:null,isSubscribed:!0,labels:[],name:"Redesign the landing page"}]},G={board:_},N={id:"5e86809283e28b96d2d38537",avatar:"/assets/avatars/avatar-anika-visser.png",name:"Anika Visser"},H=new class{getBoard(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],Promise.resolve((0,q.p)(G.board))}createColumn(e){let{name:n}=e;return new Promise((e,a)=>{try{let a=(0,q.p)(G.board),r={id:(0,K.h)(),name:n,taskIds:[]};a.columns.push(r),G.board=a,e((0,q.p)(r))}catch(e){console.error("[Kanban Api]: ",e),a(Error("Internal server error"))}})}updateColumn(e){let{columnId:n,update:a}=e;return new Promise((e,r)=>{try{let t=(0,q.p)(G.board),s=t.columns.find(e=>e.id===n);if(!s){r(Error("Column not found"));return}Object.assign(s,a),G.board=t,e((0,q.p)(s))}catch(e){console.error("[Kanban Api]: ",e),r(Error("Internal server error"))}})}clearColumn(e){let{columnId:n}=e;return new Promise((e,a)=>{try{let r=(0,q.p)(G.board),t=r.columns.find(e=>e.id===n);if(!t){a(Error("Column not found"));return}r.tasks=r.tasks.filter(e=>e.columnId!==n),t.taskIds=[],G.board=r,e(!0)}catch(e){console.error("[Kanban Api]: ",e),a(Error("Internal server error"))}})}deleteColumn(e){let{columnId:n}=e;return new Promise((e,a)=>{try{let r=(0,q.p)(G.board),t=r.columns.find(e=>e.id===n);if(!t){a(Error("Column not found"));return}r.tasks=r.tasks.filter(e=>e.columnId!==n),r.columns=r.columns.filter(e=>e.id!==n),G.board=r,e(!0)}catch(e){console.error("[Kanban Api]: ",e),a(Error("Internal server error"))}})}createTask(e){let{columnId:n,name:a}=e;return new Promise((e,r)=>{try{let t=(0,q.p)(G.board),s=t.columns.find(e=>e.id===n);if(!s){r(Error("Column not found"));return}let l={id:(0,K.h)(),assigneesIds:[],attachments:[],authorId:N.id,checklists:[],columnId:n,comments:[],description:null,due:null,isSubscribed:!1,labels:[],name:a};t.tasks.push(l),s.taskIds.push(l.id),G.board=t,e((0,q.p)(l))}catch(e){console.error("[Kanban Api]: ",e),r(Error("Internal server error"))}})}updateTask(e){let{taskId:n,update:a}=e;return new Promise((e,r)=>{try{let t=(0,q.p)(G.board),s=t.tasks.find(e=>e.id===n);if(!s){r(Error("Task not found"));return}Object.assign(s,a),G.board=t,e((0,q.p)(s))}catch(e){console.error("[Kanban Api]: ",e),r(Error("Internal server error"))}})}moveTask(e){let{taskId:n,position:a,columnId:r}=e;return new Promise((e,t)=>{try{let s=(0,q.p)(G.board),l=s.tasks.find(e=>e.id===n);if(!l){t(Error("Task not found"));return}let i=s.columns.find(e=>e.id===l.columnId);if(!i){t(Error("Column not found"));return}if(i.taskIds=i.taskIds.filter(e=>n!==e),r){let e=s.columns.find(e=>e.id===r);if(!e){t(Error("Column not found"));return}e.taskIds.splice(a,0,l.id),l.columnId=e.id}else i.taskIds.splice(a,0,l.id);G.board=s,e(!0)}catch(e){console.error("[Kanban Api]: ",e),t(Error("Internal server error"))}})}deleteTask(e){let{taskId:n}=e;return new Promise((e,a)=>{try{let r=(0,q.p)(G.board),t=r.tasks.find(e=>e.id===n);if(!t){a(Error("Task not found"));return}r.tasks=r.tasks.filter(e=>e.id!==n);let s=r.columns.find(e=>e.id===t.columnId);s&&(s.taskIds=s.taskIds.filter(e=>e!==n)),G.board=r,e(!0)}catch(e){console.error("[Kanban Api]: ",e),a(Error("Internal server error"))}})}addComment(e){let{taskId:n,message:a}=e;return new Promise((e,r)=>{try{let t=(0,q.p)(G.board),s=t.tasks.find(e=>e.id===n);if(!s){r(Error("Task not found"));return}let l={id:(0,K.h)(),authorId:N.id,createdAt:new Date().getTime(),message:a};s.comments.push(l),G.board=t,e((0,q.p)(l))}catch(e){console.error("[Kanban Api]: ",e),r(Error("Internal server error"))}})}addChecklist(e){let{taskId:n,name:a}=e;return new Promise((e,r)=>{try{let t=(0,q.p)(G.board),s=t.tasks.find(e=>e.id===n);if(!s){r(Error("Task not found"));return}let l={id:(0,K.h)(),name:a,checkItems:[]};s.checklists.push(l),G.board=t,e((0,q.p)(l))}catch(e){console.error("[Kanban Api]: ",e),r(Error("Internal server error"))}})}updateChecklist(e){let{taskId:n,checklistId:a,update:r}=e;return new Promise((e,t)=>{try{let s=(0,q.p)(G.board),l=s.tasks.find(e=>e.id===n);if(!l){t(Error("Task not found"));return}let i=l.checklists.find(e=>e.id===a);if(!i){t(Error("Checklist not found"));return}Object.assign(i,r),G.board=s,e((0,q.p)(i))}catch(e){console.error("[Kanban Api]: ",e),t(Error("Internal server error"))}})}deleteChecklist(e){let{taskId:n,checklistId:a}=e;return new Promise((e,r)=>{try{let t=(0,q.p)(G.board),s=t.tasks.find(e=>e.id===n);if(!s){r(Error("Task not found"));return}s.checklists=s.checklists.filter(e=>e.id!==a),G.board=t,e(!0)}catch(e){console.error("[Kanban Api]: ",e),r(Error("Internal server error"))}})}addCheckItem(e){let{taskId:n,checklistId:a,name:r}=e;return new Promise((e,t)=>{try{let s=(0,q.p)(G.board),l=s.tasks.find(e=>e.id===n);if(!l){t(Error("Task not found"));return}let i=l.checklists.find(e=>e.id===a);if(!i){t(Error("Checklist not found"));return}let o={id:(0,K.h)(),name:r,state:"incomplete"};i.checkItems.push(o),G.board=s,e((0,q.p)(o))}catch(e){console.error("[Kanban Api]: ",e),t(Error("Internal server error"))}})}updateCheckItem(e){let{taskId:n,checklistId:a,checkItemId:r,update:t}=e;return new Promise((e,s)=>{try{let l=(0,q.p)(G.board),i=l.tasks.find(e=>e.id===n);if(!i){s(Error("Task not found"));return}let o=i.checklists.find(e=>e.id===a);if(!o){s(Error("Checklist not found"));return}let c=o.checkItems.find(e=>e.id===r);if(!c){s(Error("Check item not found"));return}Object.assign(c,t),G.board=l,e((0,q.p)(c))}catch(e){console.error("[Kanban Api]: ",e),s(Error("Internal server error"))}})}deleteCheckItem(e){let{taskId:n,checklistId:a,checkItemId:r}=e;return new Promise((e,t)=>{try{let s=(0,q.p)(G.board),l=s.tasks.find(e=>e.id===n);if(!l){t(Error("Task not found"));return}let i=l.checklists.find(e=>e.id===a);if(!i){t(Error("Checklist not found"));return}i.checkItems=i.checkItems.filter(e=>e.id!==r),G.board=s,e(!0)}catch(e){console.error("[Kanban Api]: ",e),t(Error("Internal server error"))}})}};var L=a(77453);let V={addCheckItem:e=>async n=>{let a=await H.addCheckItem(e);n(L.t.actions.addCheckItem({taskId:e.taskId,checklistId:e.checklistId,checkItem:a}))},addChecklist:e=>async n=>{let a=await H.addChecklist(e);n(L.t.actions.addChecklist({taskId:e.taskId,checklist:a}))},addComment:e=>async n=>{let a=await H.addComment(e);n(L.t.actions.addComment({taskId:e.taskId,comment:a}))},clearColumn:e=>async n=>{await H.clearColumn(e),n(L.t.actions.clearColumn(e.columnId))},createColumn:e=>async n=>{let a=await H.createColumn(e);n(L.t.actions.createColumn(a))},createTask:e=>async n=>{let a=await H.createTask(e);n(L.t.actions.createTask(a))},deleteCheckItem:e=>async n=>{await H.deleteCheckItem(e),n(L.t.actions.deleteCheckItem(e))},deleteChecklist:e=>async n=>{await H.deleteChecklist(e),n(L.t.actions.deleteChecklist(e))},deleteColumn:e=>async n=>{await H.deleteColumn(e),n(L.t.actions.deleteColumn(e.columnId))},deleteTask:e=>async n=>{await H.deleteTask(e),n(L.t.actions.deleteTask(e.taskId))},getBoard:()=>async e=>{let n=await H.getBoard();e(L.t.actions.getBoard(n))},moveTask:e=>async n=>{await H.moveTask(e),n(L.t.actions.moveTask(e))},updateCheckItem:e=>async n=>{let a=await H.updateCheckItem(e);n(L.t.actions.updateCheckItem({taskId:e.taskId,checklistId:e.checklistId,checkItem:a}))},updateChecklist:e=>async n=>{let a=await H.updateChecklist(e);n(L.t.actions.updateChecklist({taskId:e.taskId,checklist:a}))},updateColumn:e=>async n=>{let a=await H.updateColumn(e);n(L.t.actions.updateColumn(a))},updateTask:e=>async n=>{let a=await H.updateTask(e);n(L.t.actions.updateTask(a))}};var X=a(72591),Y=a(66242),J=a(88441),Q=a(28962),$=a(69368);let ee=e=>{let{checkItem:n,isRenaming:a=!1,onCheck:s,onDelete:l,onRenameCancel:i,onRenameComplete:c,onRenameInit:d,onUncheck:u,...h}=e,[m,p]=(0,t.useState)(n.name),k=(0,t.useCallback)(()=>{p(n.name)},[n]);(0,t.useEffect)(()=>{k()},[n]);let b=(0,t.useCallback)(e=>{e.target.checked?null==s||s():null==u||u()},[s,u]),x=(0,t.useCallback)(e=>{p(e.target.value)},[]),f=(0,t.useCallback)(()=>{p(n.name),null==i||i()},[n,i]),g=(0,t.useCallback)(async()=>{null==c||c(m)},[m,c]),C="complete"===n.state;return(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:1,sx:{px:3,py:1},...h,children:[(0,r.jsx)($.Z,{edge:"start",checked:C,onChange:b}),(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:2,sx:{flexGrow:1},children:[(0,r.jsx)(A.Z,{disableUnderline:!0,fullWidth:!0,onChange:x,onClick:d,sx:{...!a&&C&&{textDecoration:"line-through"},"& .MuiInputBase-input":{borderRadius:1.5,fontWeight:500,overflow:"hidden",px:2,py:1,textOverflow:"ellipsis",wordWrap:"break-word","&:hover, &:focus":{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"neutral.100",borderRadius:1}}},value:m}),a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{onClick:g,size:"small",variant:"contained",children:"Update"}),(0,r.jsx)(w.Z,{color:"inherit",onClick:f,size:"small",children:"Cancel"})]}):(0,r.jsx)(E.Z,{onClick:l,children:(0,r.jsx)(R.Z,{fontSize:"small",children:(0,r.jsx)(X.Z,{})})})]})]})};ee.propTypes={checkItem:p().object.isRequired,isRenaming:p().bool,onCheck:p().func,onDelete:p().func,onRenameCancel:p().func,onRenameComplete:p().func,onRenameInit:p().func,onUncheck:p().func};var en=a(57709);let ea=e=>{let{onAdd:n,...a}=e,[s,l]=(0,t.useState)(!1),[i,c]=(0,t.useState)(""),d=(0,t.useCallback)(()=>{l(!0)},[]),u=(0,t.useCallback)(()=>{l(!1),c("")},[]),h=(0,t.useCallback)(e=>{c(e.target.value)},[]),m=(0,t.useCallback)(async()=>{i&&(null==n||n(i),l(!1),c(""))},[i,n]);return(0,r.jsx)("div",{...a,children:s?(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,r.jsx)(en.Z,{onChange:h,placeholder:"Add an item",value:i,sx:{flexGrow:1,"& .MuiInputBase-input":{px:2,py:1}}}),(0,r.jsx)(w.Z,{onClick:m,size:"small",variant:"contained",children:"Add"}),(0,r.jsx)(w.Z,{color:"inherit",onClick:u,size:"small",children:"Cancel"})]}):(0,r.jsx)(w.Z,{color:"inherit",onClick:d,size:"small",startIcon:(0,r.jsx)(R.Z,{children:(0,r.jsx)(j.Z,{})}),children:"Add Item"})})};ea.propTypes={onAdd:p().func};let er=e=>{let n=e.length,a=e.filter(e=>"complete"===e.state).length;return Math.round(0===n?100:a/n*100)},et=e=>{let{checklist:n,onCheckItemAdd:a,onCheckItemDelete:s,onCheckItemCheck:l,onCheckItemUncheck:d,onCheckItemRename:u,onDelete:h,onRename:m,...p}=e,[k,b]=(0,t.useState)(n.name),[x,f]=(0,t.useState)(!1),[g,C]=(0,t.useState)(null),j=(0,t.useCallback)(()=>{b(n.name)},[n]);(0,t.useEffect)(()=>{j()},[n]);let Z=(0,t.useCallback)(e=>{b(e.target.value)},[]),v=(0,t.useCallback)(()=>{f(!0)},[]),I=(0,t.useCallback)(()=>{f(!1),b(n.name)},[n]),y=(0,t.useCallback)(async()=>{if(!k||k===n.name){f(!1),b(n.name);return}f(!1),null==m||m(k)},[n,k,m]),T=(0,t.useCallback)(e=>{C(e)},[]),P=(0,t.useCallback)(()=>{C(null)},[]),D=(0,t.useCallback)((e,n)=>{C(null),null==u||u(e,n)},[u]),z=er(n.checkItems),O=n.checkItems.length>0;return(0,r.jsxs)(Y.Z,{variant:"outlined",...p,children:[(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:2,sx:{p:1},children:[(0,r.jsx)(A.Z,{disableUnderline:!0,fullWidth:!0,onChange:Z,onClick:v,sx:{"& .MuiInputBase-input":{borderRadius:1.5,fontWeight:500,overflow:"hidden",px:2,py:1,textOverflow:"ellipsis",wordWrap:"break-word","&:hover, &:focus":{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"neutral.100",borderRadius:1}}},value:k}),x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{onClick:y,size:"small",variant:"contained",children:"Save"}),(0,r.jsx)(w.Z,{color:"inherit",onClick:I,size:"small",children:"Cancel"})]}):(0,r.jsx)(E.Z,{onClick:h,children:(0,r.jsx)(R.Z,{fontSize:"small",children:(0,r.jsx)(X.Z,{})})})]}),(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:2,sx:{pb:3,pt:2,px:3},children:[(0,r.jsx)(J.Z,{color:"primary",sx:{borderRadius:1,flexGrow:1,height:8,["& .".concat(Q.Z.bar)]:{borderRadius:"inherit"}},value:z,variant:"determinate"}),(0,r.jsxs)(c.Z,{color:"text.secondary",variant:"body2",children:[z,"%"]})]}),(0,r.jsx)(S.Z,{}),O&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{divider:(0,r.jsx)(S.Z,{}),spacing:1,children:n.checkItems.map(e=>{let n=g===e.id;return(0,r.jsx)(ee,{checkItem:e,onCheck:()=>null==l?void 0:l(e.id),onDelete:()=>null==s?void 0:s(e.id),onRenameCancel:P,onRenameComplete:n=>D(e.id,n),onRenameInit:()=>T(e.id),onUncheck:()=>null==d?void 0:d(e.id),isRenaming:n},e.id)})}),(0,r.jsx)(S.Z,{})]}),(0,r.jsx)(i.Z,{sx:{p:1},children:(0,r.jsx)(ea,{onAdd:a})})]})};et.propTypes={checklist:p().object.isRequired,onCheckItemAdd:p().func,onCheckItemDelete:p().func,onCheckItemCheck:p().func,onCheckItemUncheck:p().func,onCheckItemRename:p().func,onDelete:p().func,onRename:p().func};var es=a(11791);let el=e=>(0,M.v9)(n=>{let{members:a}=n.kanban;return a.byId[e]||null}),ei=e=>{let{comment:n,...a}=e,t=el(n.authorId),s=(null==t?void 0:t.avatar)||void 0,l=(0,k.Z)(n.createdAt,"MMM dd, yyyy 'at' hh:mm a");return(0,r.jsxs)(o.Z,{alignItems:"flex-start",direction:"row",spacing:2,...a,children:[(0,r.jsx)(v.Z,{src:s}),(0,r.jsxs)(o.Z,{spacing:1,sx:{flexGrow:1},children:[(0,r.jsx)(c.Z,{variant:"subtitle2",children:null==t?void 0:t.name}),(0,r.jsx)(es.Z,{sx:{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"neutral.50",p:2},variant:"outlined",children:(0,r.jsx)(c.Z,{variant:"body2",children:n.message})}),(0,r.jsx)(c.Z,{color:"text.secondary",component:"p",variant:"caption",children:l})]})]})};ei.propTypes={comment:p().objectOf(p().any).isRequired};let eo=e=>{let{avatar:n,onAdd:a,...s}=e,[l,c]=(0,t.useState)(""),d=(0,t.useCallback)(e=>{c(e.target.value)},[]),u=(0,t.useCallback)(async e=>{e.preventDefault(),l&&(null==a||a(l),c(""))},[l,a]);return(0,r.jsxs)(o.Z,{alignItems:"flex-start",direction:"row",spacing:2,...s,children:[(0,r.jsx)(v.Z,{src:n}),(0,r.jsxs)(i.Z,{component:"form",onSubmit:u,sx:{flexGrow:1},children:[(0,r.jsx)(en.Z,{fullWidth:!0,multiline:!0,onChange:d,placeholder:"Write a comment...",rows:3,size:"small",value:l}),(0,r.jsx)(i.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:(0,r.jsx)(w.Z,{size:"small",type:"submit",variant:"contained",children:"Comment"})})]})]})};eo.propTypes={avatar:p().string.isRequired,onAdd:p().func};var ec=a(25464),ed=a(63931),eu=a(73539);let eh=["Business","Planning","Frontend","Design"],em=e=>{let{labels:n=[],onChange:a}=e,s=(0,eu.S)(),l=(0,t.useMemo)(()=>eh.filter(e=>!n.includes(e)),[n]),i=(0,t.useCallback)(e=>{let r=n.filter(n=>n!==e);null==a||a(r)},[n,a]),c=(0,t.useCallback)(e=>{let r;let t=n.find(n=>n===e);r=t?n.filter(n=>n!==e):[...n,e],s.handleClose(),null==a||a(r)},[n,s,a]),d=l.length>0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",gap:1,children:[n.map(e=>(0,r.jsx)(y.Z,{label:e,onDelete:()=>i(e),size:"small"},e)),(0,r.jsx)(E.Z,{onClick:s.handleOpen,ref:s.anchorRef,disabled:!d,children:(0,r.jsx)(R.Z,{fontSize:"small",children:(0,r.jsx)(j.Z,{})})})]}),(0,r.jsx)(ec.Z,{anchorEl:s.anchorRef.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},onClose:s.handleClose,open:s.open,transformOrigin:{horizontal:"right",vertical:"top"},children:l.map(e=>(0,r.jsx)(ed.Z,{onClick:()=>c(e),children:e},e))})]})};em.propTypes={labels:p().arrayOf(p().string.isRequired),onChange:p().func};var ep=a(94207),ek=a(56863),eb=a(14564);let ex=e=>{let{onChange:n,options:a=[],value:s}=e,l=(0,eu.S)(),[i,o]=(0,t.useState)(()=>a.find(e=>e.value===s));(0,t.useEffect)(()=>{let e=a.find(e=>e.value===s);o(e)},[a,s]);let c=(0,t.useCallback)(()=>{i&&(null==n||n(i.value))},[i,n]),d=(0,t.useCallback)(e=>{let n=a.find(n=>n.value===e);l.handleClose(),o(n)},[a,l]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ek.Z,{ref:l.anchorRef,variant:"contained",size:"small",children:[(0,r.jsxs)(w.Z,{onClick:c,children:["Submit as ",null==i?void 0:i.label]}),(0,r.jsx)(w.Z,{size:"small",onClick:l.handleToggle,children:(0,r.jsx)(ep.Z,{})})]}),(0,r.jsx)(eb.ZP,{anchorEl:l.anchorRef.current,disableScrollLock:!0,onClose:l.handleClose,open:l.open,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},children:a.map(e=>(0,r.jsx)(ed.Z,{selected:e.value===s,onClick:()=>d(e.value),children:e.label},e.value))})]})};ex.propTypes={onChange:p().func,options:p().array,value:p().string.isRequired};let ef=()=>(0,M.v9)(e=>{let{columns:n}=e.kanban;return Object.values(n.byId)}),eg=e=>(0,M.v9)(n=>{let{tasks:a}=n.kanban;return e&&a.byId[e]||null}),eC=e=>(0,M.v9)(n=>{let{columns:a}=n.kanban;return e&&a.byId[e]||null}),ej=e=>(0,M.v9)(n=>{let{members:a}=n.kanban;return e&&a.byId[e]||null}),eZ=e=>(0,M.v9)(n=>{let{members:a}=n.kanban;return e?e.map(e=>a.byId[e]).filter(e=>!!e):[]}),ev=e=>{let{taskId:n,onClose:a,open:s=!1,...d}=e,u=(0,W.I)(),h=(0,M.I0)(),m=ef(),p=eg(n),b=eC(null==p?void 0:p.columnId),K=ej(null==p?void 0:p.authorId),q=eZ(null==p?void 0:p.assigneesIds),U=(0,O.Z)(e=>e.breakpoints.up("md")),[B,F]=(0,t.useState)("overview"),[_,G]=(0,t.useState)((null==p?void 0:p.name)||""),N=(0,t.useCallback)(()=>{F("overview")},[]);(0,t.useEffect)(()=>{N()},[n]);let H=(0,t.useCallback)(()=>{G((null==p?void 0:p.name)||"")},[p]);(0,t.useEffect)(()=>{H()},[p]);let L=(0,t.useCallback)((e,n)=>{F(n)},[]),X=(0,t.useCallback)(async e=>{try{await h(V.moveTask({taskId:p.id,position:0,columnId:e})),null==a||a()}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p,a]),Y=(0,t.useCallback)(async()=>{try{await h(V.deleteTask({taskId:p.id})),null==a||a()}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p,a]),J=(0,t.useCallback)(async e=>{try{await h(V.updateTask({taskId:p.id,update:{name:e}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),Q=(0,t.useCallback)(()=>{if(!_){G(p.name);return}_!==p.name&&J(_)},[p,_,J]),$=(0,t.useCallback)(e=>{G(e.target.value)},[]),ee=(0,t.useCallback)(e=>{"Enter"===e.code&&_&&_!==p.name&&J(_)},[p,_,J]),en=(0,t.useMemo)(()=>x()(async e=>{try{await h(V.updateTask({taskId:p.id,update:{description:e}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},500),[h,p]),ea=(0,t.useCallback)(e=>{en(e.target.value)},[en]),er=(0,t.useCallback)(async()=>{try{await h(V.updateTask({taskId:p.id,update:{isSubscribed:!0}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),es=(0,t.useCallback)(async()=>{try{await h(V.updateTask({taskId:p.id,update:{isSubscribed:!1}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),el=(0,t.useCallback)(async e=>{try{await h(V.updateTask({taskId:p.id,update:{labels:e}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),ec=(0,t.useCallback)(async()=>{try{await h(V.addChecklist({taskId:p.id,name:"Untitled Checklist"}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),ed=(0,t.useCallback)(async(e,n)=>{try{await h(V.updateChecklist({taskId:p.id,checklistId:e,update:{name:n}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),eu=(0,t.useCallback)(async e=>{try{await h(V.deleteChecklist({taskId:p.id,checklistId:e}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),eh=(0,t.useCallback)(async(e,n)=>{try{await h(V.addCheckItem({taskId:p.id,checklistId:e,name:n}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),ep=(0,t.useCallback)(async(e,n)=>{try{await h(V.deleteCheckItem({taskId:p.id,checklistId:e,checkItemId:n}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),ek=(0,t.useCallback)(async(e,n)=>{try{await h(V.updateCheckItem({taskId:p.id,checklistId:e,checkItemId:n,update:{state:"complete"}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),eb=(0,t.useCallback)(async(e,n)=>{try{await h(V.updateCheckItem({taskId:p.id,checklistId:e,checkItemId:n,update:{state:"incomplete"}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),ev=(0,t.useCallback)(async(e,n,a)=>{try{await h(V.updateCheckItem({taskId:p.id,checklistId:e,checkItemId:n,update:{name:a}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),eI=(0,t.useCallback)(async e=>{try{await h(V.addComment({taskId:p.id,message:e}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[h,p]),ew=(0,t.useMemo)(()=>m.map(e=>({label:e.name,value:e.id})),[m]),ey=p&&b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Z,{alignItems:{sm:"center"},direction:{xs:"column-reverse",sm:"row"},justifyContent:{sm:"space-between"},spacing:1,sx:{p:3},children:[(0,r.jsx)("div",{children:(0,r.jsx)(ex,{onChange:e=>X(e),options:ew,value:b.id})}),(0,r.jsxs)(o.Z,{justifyContent:"flex-end",alignItems:"center",direction:"row",spacing:1,children:[p.isSubscribed?(0,r.jsx)(E.Z,{onClick:es,children:(0,r.jsx)(R.Z,{children:(0,r.jsx)(C.Z,{})})}):(0,r.jsx)(E.Z,{onClick:er,children:(0,r.jsx)(R.Z,{children:(0,r.jsx)(g.Z,{})})}),(0,r.jsx)(E.Z,{onClick:Y,children:(0,r.jsx)(R.Z,{children:(0,r.jsx)(f.Z,{})})}),!U&&(0,r.jsx)(E.Z,{onClick:a,children:(0,r.jsx)(R.Z,{children:(0,r.jsx)(Z.Z,{})})})]})]}),(0,r.jsx)(i.Z,{sx:{px:1},children:(0,r.jsx)(A.Z,{disableUnderline:!0,fullWidth:!0,onBlur:Q,onChange:$,onKeyUp:ee,placeholder:"Task name",sx:e=>({...e.typography.h6,"& .MuiInputBase-input":{borderRadius:1.5,overflow:"hidden",px:2,py:1,textOverflow:"ellipsis",wordWrap:"break-word","&:hover, &:focus":{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"neutral.100"}}}),value:_})}),(0,r.jsxs)(z.Z,{onChange:L,sx:{px:3},value:B,children:[(0,r.jsx)(D.Z,{value:"overview",label:"Overview"}),(0,r.jsx)(D.Z,{value:"checklists",label:"Checklists"}),(0,r.jsx)(D.Z,{value:"comments",label:"Comments"})]}),(0,r.jsx)(S.Z,{}),(0,r.jsxs)(i.Z,{sx:{p:3},children:["overview"===B&&(0,r.jsxs)(P.Z,{container:!0,spacing:3,children:[(0,r.jsx)(P.Z,{xs:12,sm:4,children:(0,r.jsx)(c.Z,{color:"text.secondary",variant:"caption",children:"Created by"})}),(0,r.jsx)(P.Z,{xs:12,sm:8,children:K&&(0,r.jsx)(v.Z,{src:K.avatar||void 0})}),(0,r.jsx)(P.Z,{xs:12,sm:4,children:(0,r.jsx)(c.Z,{color:"text.secondary",variant:"caption",children:"Assigned to"})}),(0,r.jsx)(P.Z,{xs:12,sm:8,children:(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:1,children:[(0,r.jsx)(I.Z,{max:5,children:q.map(e=>(0,r.jsx)(v.Z,{src:e.avatar||void 0},e.id))}),(0,r.jsx)(E.Z,{disabled:!0,children:(0,r.jsx)(R.Z,{fontSize:"small",children:(0,r.jsx)(j.Z,{})})})]})}),(0,r.jsx)(P.Z,{xs:12,sm:4,children:(0,r.jsx)(c.Z,{color:"text.secondary",variant:"caption",children:"Attachments"})}),(0,r.jsx)(P.Z,{xs:12,sm:8,children:(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:1,children:[p.attachments.map(e=>(0,r.jsx)(v.Z,{src:e.url||void 0,sx:{height:64,width:64},variant:"rounded"},e.id)),(0,r.jsx)(E.Z,{disabled:!0,children:(0,r.jsx)(R.Z,{fontSize:"small",children:(0,r.jsx)(j.Z,{})})})]})}),(0,r.jsx)(P.Z,{xs:12,sm:4,children:(0,r.jsx)(c.Z,{color:"text.secondary",variant:"caption",children:"Due date"})}),(0,r.jsx)(P.Z,{xs:12,sm:8,children:p.due&&(0,r.jsx)(y.Z,{size:"small",label:(0,k.Z)(p.due,"MMM dd, yyyy")})}),(0,r.jsx)(P.Z,{xs:12,sm:4,children:(0,r.jsx)(c.Z,{color:"text.secondary",variant:"caption",children:"Labels"})}),(0,r.jsx)(P.Z,{xs:12,sm:8,children:(0,r.jsx)(em,{labels:p.labels,onChange:el})}),(0,r.jsx)(P.Z,{xs:12,sm:4,children:(0,r.jsx)(c.Z,{color:"text.secondary",variant:"caption",children:"Description"})}),(0,r.jsx)(P.Z,{xs:12,sm:8,children:(0,r.jsx)(A.Z,{defaultValue:p.description,fullWidth:!0,multiline:!0,disableUnderline:!0,onChange:ea,placeholder:"Leave a message",rows:6,sx:{borderColor:"divider",borderRadius:1,borderStyle:"solid",borderWidth:1,p:1}})})]}),"checklists"===B&&(0,r.jsxs)(o.Z,{spacing:2,children:[p.checklists.map(e=>(0,r.jsx)(et,{checklist:e,onCheckItemAdd:n=>eh(e.id,n),onCheckItemDelete:n=>ep(e.id,n),onCheckItemCheck:n=>ek(e.id,n),onCheckItemUncheck:n=>eb(e.id,n),onCheckItemRename:(n,a)=>ev(e.id,n,a),onDelete:()=>eu(e.id),onRename:n=>ed(e.id,n)},e.id)),(0,r.jsx)(w.Z,{startIcon:(0,r.jsx)(R.Z,{children:(0,r.jsx)(j.Z,{})}),onClick:ec,variant:"contained",children:"Add"})]}),"comments"===B&&(0,r.jsxs)(o.Z,{spacing:2,children:[p.comments.map(e=>(0,r.jsx)(ei,{comment:e},e.id)),(0,r.jsx)(eo,{avatar:u.avatar,onAdd:eI})]})]})]}):null;return(0,r.jsx)(T.ZP,{anchor:"right",onClose:a,open:s,PaperProps:{sx:{width:"100%",maxWidth:500}},...d,children:ey})};ev.propTypes={onClose:p().func,open:p().bool,taskId:p().string};let eI=e=>{let{onAdd:n,...a}=e,[s,l]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),h=(0,t.useCallback)(e=>{u(e.target.value)},[]),m=(0,t.useCallback)(()=>{l(!0)},[]),p=(0,t.useCallback)(()=>{l(!1),u("")},[]),k=(0,t.useCallback)(async()=>{null==n||n(d),l(!1),u("")},[d,n]);return(0,r.jsx)(Y.Z,{sx:{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"background.paper"},...a,children:s?(0,r.jsxs)(i.Z,{sx:{p:2},children:[(0,r.jsx)(en.Z,{autoFocus:!0,fullWidth:!0,placeholder:"My new task",name:"name",onChange:h,sx:{"& .MuiInputBase-input":{px:2,py:1}},value:d}),(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:2,sx:{mt:2},children:[(0,r.jsx)(w.Z,{onClick:k,size:"small",startIcon:(0,r.jsx)(R.Z,{children:(0,r.jsx)(j.Z,{})}),variant:"contained",children:"Add Task"}),(0,r.jsx)(w.Z,{color:"inherit",onClick:p,size:"small",children:"Cancel"})]})]}):(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",onClick:m,spacing:1,sx:{cursor:"pointer",p:2,userSelect:"none"},children:[(0,r.jsx)(R.Z,{color:"action",children:(0,r.jsx)(j.Z,{})}),(0,r.jsx)(c.Z,{color:"text.secondary",variant:"subtitle1",children:"Add Task"})]})})};eI.propTypes={onAdd:p().func};var ew=a(88612),ey=a(85170),eS=a(69709),eT=a(83965);let eP=e=>(0,M.v9)(n=>{let{tasks:a}=n.kanban;return a.byId[e]}),eE=e=>(0,M.v9)(n=>{let{members:a}=n.kanban;return e?e.map(e=>a.byId[e]).filter(e=>!!e):[]}),eA=(0,t.forwardRef)(function(e,n){let{taskId:a,dragging:t=!1,onOpen:s,...l}=e,d=eP(a),u=eE(null==d?void 0:d.assigneesIds);if(!d)return null;let h=d.assigneesIds.length>0,m=d.attachments.length>0,p=d.checklists.length>0,k=d.comments.length>0,b=d.labels.length>0;return(0,r.jsxs)(Y.Z,{elevation:t?8:1,onClick:s,ref:n,sx:{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"background.paper",...t&&{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"background.paper"},p:3,userSelect:"none","&:hover":{backgroundColor:e=>"dark"===e.palette.mode?"neutral.700":"neutral.50"},"&.MuiPaper-elevation1":{boxShadow:1}},...l,children:[m&&(0,r.jsx)(eT.Z,{image:d.attachments[0].url,sx:{borderRadius:1.5,height:120,mb:1}}),(0,r.jsx)(c.Z,{variant:"subtitle1",children:d.name}),b&&(0,r.jsx)(i.Z,{sx:{alignItems:"center",display:"flex",flexWrap:"wrap",m:-1,mt:1},children:d.labels.map(e=>(0,r.jsx)(y.Z,{label:e,size:"small",sx:{m:1}},e))}),(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,children:[(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:2,sx:{mt:2},children:[d.isSubscribed&&(0,r.jsx)(R.Z,{color:"action",children:(0,r.jsx)(g.Z,{})}),m&&(0,r.jsx)(R.Z,{color:"action",children:(0,r.jsx)(ew.Z,{})}),p&&(0,r.jsx)(R.Z,{color:"action",children:(0,r.jsx)(ey.Z,{})}),k&&(0,r.jsx)(R.Z,{color:"action",children:(0,r.jsx)(eS.Z,{})})]}),h&&(0,r.jsx)(I.Z,{max:3,children:u.map(e=>(0,r.jsx)(v.Z,{src:e.avatar||void 0},e.id))})]})]})});eA.propTypes={taskId:p().string.isRequired,dragging:p().bool,onOpen:p().func};var eR=a(83075);let eD=e=>{let{tasksCount:n,name:a,onClear:s,onDelete:l,onRename:i}=e,c=(0,eu.S)(),[d,u]=(0,t.useState)(a),h=(0,t.useCallback)(()=>{u(a)},[a]);(0,t.useEffect)(()=>{h()},[a]);let m=(0,t.useCallback)(()=>{if(!d){u(a);return}d!==a&&(null==i||i(d))},[d,a,i]),p=(0,t.useCallback)(e=>{u(e.target.value)},[]),k=(0,t.useCallback)(e=>{"Enter"===e.code&&d&&d!==a&&(null==i||i(d))},[d,a,i]),b=(0,t.useCallback)(()=>{c.handleClose(),null==s||s()},[c,s]),x=(0,t.useCallback)(()=>{c.handleClose(),null==l||l()},[c,l]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,sx:{pr:2,py:1},children:[(0,r.jsx)(A.Z,{disableUnderline:!0,fullWidth:!0,onBlur:m,onChange:p,onKeyUp:k,placeholder:"Column Name",sx:{"& .MuiInputBase-input":{borderRadius:1.5,fontWeight:500,overflow:"hidden",px:2,py:1,textOverflow:"ellipsis",wordWrap:"break-word","&:hover, &:focus":{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"neutral.100"}}},value:d}),(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,r.jsx)(y.Z,{label:n}),(0,r.jsx)(E.Z,{edge:"end",onClick:c.handleOpen,ref:c.anchorRef,children:(0,r.jsx)(R.Z,{children:(0,r.jsx)(eR.Z,{})})})]})]}),(0,r.jsxs)(ec.Z,{anchorEl:c.anchorRef.current,anchorOrigin:{horizontal:"center",vertical:"bottom"},keepMounted:!0,onClose:c.handleClose,open:c.open,children:[(0,r.jsx)(ed.Z,{onClick:b,children:"Clear"}),(0,r.jsx)(ed.Z,{onClick:x,children:"Delete"})]})]})};eD.propTypes={tasksCount:p().number.isRequired,name:p().string.isRequired,onClear:p().func,onDelete:p().func,onRename:p().func};let ez=e=>(0,M.v9)(n=>{let{columns:a}=n.kanban;return a.byId[e]}),eO=e=>{let{columnId:n,onTaskAdd:a,onTaskOpen:t,onClear:l,onDelete:o,onRename:c,...d}=e,u=ez(n);if(!u)return null;let h=u.taskIds.length;return(0,r.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",maxHeight:"100%",overflowX:"hidden",overflowY:"hidden",width:{xs:300,sm:380}},...d,children:[(0,r.jsx)(eD,{name:u.name,onClear:l,onDelete:o,onRename:c,tasksCount:h}),(0,r.jsxs)(i.Z,{sx:{backgroundColor:e=>"dark"===e.palette.mode?"neutral.900":"neutral.100",borderRadius:2.5},children:[(0,r.jsx)(s.bK,{droppableId:u.id,type:"task",children:e=>(0,r.jsxs)(i.Z,{ref:e.innerRef,sx:{flexGrow:1,minHeight:80,overflowY:"auto",px:3,pt:1.5},children:[null==u?void 0:u.taskIds.map((e,n)=>(0,r.jsx)(s._l,{draggableId:e,index:n,children:(n,a)=>(0,r.jsx)(i.Z,{ref:n.innerRef,style:{...n.draggableProps.style},sx:{outline:"none",py:1.5},...n.draggableProps,...n.dragHandleProps,children:(0,r.jsx)(eA,{dragging:a.isDragging,onOpen:()=>null==t?void 0:t(e),taskId:e},e)})},e)),e.placeholder]})}),(0,r.jsx)(i.Z,{sx:{pt:1.5,pb:3,px:3},children:(0,r.jsx)(eI,{onAdd:a})})]})]})};eO.propTypes={columnId:p().string.isRequired,onClear:p().func,onDelete:p().func,onRename:p().func,onTaskAdd:p().func,onTaskOpen:p().func};let eW=e=>{let{onAdd:n,...a}=e,[s,l]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),h=(0,t.useCallback)(e=>{u(e.target.value)},[]),m=(0,t.useCallback)(()=>{l(!0)},[]),p=(0,t.useCallback)(()=>{l(!1),u("")},[]),k=(0,t.useCallback)(async()=>{null==n||n(d),l(!1),u("")},[d,n]);return(0,r.jsx)(i.Z,{sx:{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"neutral.100",borderRadius:2.5,mt:7,mx:1,width:{sm:380,xs:300}},...a,children:s?(0,r.jsxs)(i.Z,{sx:{p:2},children:[(0,r.jsx)(en.Z,{autoFocus:!0,fullWidth:!0,placeholder:"My new column",name:"name",onChange:h,value:d,sx:{"& .MuiInputBase-input":{px:2,py:1}}}),(0,r.jsxs)(i.Z,{sx:{alignItems:"center",display:"flex",mt:2},children:[(0,r.jsx)(w.Z,{onClick:k,size:"small",startIcon:(0,r.jsx)(R.Z,{children:(0,r.jsx)(j.Z,{})}),variant:"contained",children:"Add Column"}),(0,r.jsx)(w.Z,{color:"inherit",onClick:p,size:"small",sx:{ml:2},children:"Cancel"})]})]}):(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",onClick:m,spacing:1,sx:{cursor:"pointer",p:2,userSelect:"none"},children:[(0,r.jsx)(R.Z,{color:"action",children:(0,r.jsx)(j.Z,{})}),(0,r.jsx)(c.Z,{color:"text.secondary",variant:"subtitle1",children:"Add Column"})]})})};eW.propTypes={onAdd:p().func};let eM=()=>{let{columns:e}=(0,M.v9)(e=>e.kanban);return e.allIds},eK=()=>{let e=(0,M.I0)(),n=(0,t.useCallback)(()=>{e(V.getBoard())},[e]);(0,t.useEffect)(()=>{n()},[])},eq=()=>{let e=(0,M.I0)(),n=eM(),[a,h]=(0,t.useState)(null);(0,u.a)(),eK();let m=(0,t.useCallback)(async n=>{let{source:a,destination:r,draggableId:t}=n;try{if(!r||a.droppableId===r.droppableId&&a.index===r.index)return;a.droppableId===r.droppableId?await e(V.moveTask({taskId:t,position:r.index})):await e(V.moveTask({taskId:t,position:r.index,columnId:r.droppableId}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[e]),p=(0,t.useCallback)(async n=>{try{await e(V.createColumn({name:n||"Untitled Column"})),l.ZP.success("Column created")}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[e]),k=(0,t.useCallback)(async n=>{try{await e(V.clearColumn({columnId:n})),l.ZP.success("Column cleared")}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[e]),b=(0,t.useCallback)(async n=>{try{await e(V.deleteColumn({columnId:n})),l.ZP.success("Column deleted")}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[e]),x=(0,t.useCallback)(async(n,a)=>{try{await e(V.updateColumn({columnId:n,update:{name:a}}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[e]),f=(0,t.useCallback)(async(n,a)=>{try{await e(V.createTask({columnId:n,name:a||"Untitled Task"}))}catch(e){console.error(e),l.ZP.error("Something went wrong!")}},[e]),g=(0,t.useCallback)(e=>{h(e)},[]),C=(0,t.useCallback)(()=>{h(null)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.p,{title:"Dashboard: Kanban"}),(0,r.jsxs)(i.Z,{component:"main",sx:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden",pt:8},children:[(0,r.jsx)(i.Z,{sx:{px:3},children:(0,r.jsx)(c.Z,{variant:"h4",children:"Kanban"})}),(0,r.jsx)(s.Z5,{onDragEnd:m,children:(0,r.jsx)(i.Z,{sx:{display:"flex",flexGrow:1,flexShrink:1,overflowX:"auto",overflowY:"hidden",px:3,py:3},children:(0,r.jsxs)(o.Z,{alignItems:"flex-start",direction:"row",spacing:3,children:[n.map(e=>(0,r.jsx)(eO,{columnId:e,onClear:()=>k(e),onDelete:()=>b(e),onRename:n=>x(e,n),onTaskAdd:n=>f(e,n),onTaskOpen:g},e)),(0,r.jsx)(eW,{onAdd:p})]})})})]}),(0,r.jsx)(ev,{onClose:C,open:!!a,taskId:a||void 0})]})};eq.getLayout=e=>(0,r.jsx)(h.A,{children:e});var eU=eq},35634:function(e,n,a){"use strict";a.d(n,{p:function(){return function e(n){return"object"!=typeof n||null===n?n:n instanceof Date?new Date(n.getTime()):n instanceof Array?n.reduce((n,a,r)=>(n[r]=e(a),n),[]):n instanceof Object?Object.keys(n).reduce((a,r)=>(a[r]=e(n[r]),a),{}):void 0}}})}},function(e){e.O(0,[630,4310,8471,7176,3155,3852,3473,4411,209,7974,148,4952,3622,865,9774,2888,179],function(){return e(e.s=7690)}),_N_E=e.O()}]);