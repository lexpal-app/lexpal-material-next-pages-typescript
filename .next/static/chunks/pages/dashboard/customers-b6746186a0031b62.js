(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1525],{68039:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/customers",function(){return a(9829)}])},70450:function(e,t,a){"use strict";a.d(t,{v:function(){return v}});var r=a(79643),n=a(72486),s=a(35634),i=a(7069),c=a(88330),o=a(1784),l=a(33511);let d=new Date,u=[{id:"5e887ac47eed253091be10cb",avatar:"/assets/avatars/avatar-carson-darrin.png",city:"Cleveland",country:"USA",currency:"$",email:"carson.darrin@devias.io",hasAcceptedMarketing:!0,isProspect:!1,isReturning:!0,name:"Carson Darrin",state:"Ohio",totalSpent:300,totalOrders:3,updatedAt:(0,i.Z)((0,c.Z)(d,7),1).getTime()},{id:"5e887b209c28ac3dd97f6db5",avatar:"/assets/avatars/avatar-fran-perez.png",city:"Atlanta",country:"USA",currency:"$",email:"fran.perez@devias.io",hasAcceptedMarketing:!0,isProspect:!0,isReturning:!1,name:"Fran Perez",state:"Georgia",totalSpent:0,totalOrders:0,updatedAt:(0,i.Z)((0,c.Z)(d,1),2).getTime()},{id:"5e887b7602bdbc4dbb234b27",avatar:"/assets/avatars/avatar-jie-yan-song.png",city:"North Canton",country:"USA",currency:"$",email:"jie.yan.song@devias.io",hasAcceptedMarketing:!1,isProspect:!1,isReturning:!1,name:"Jie Yan Song",state:"Ohio",totalSpent:5600,totalOrders:6,updatedAt:(0,i.Z)((0,c.Z)(d,4),2).getTime()},{id:"5e86809283e28b96d2d38537",avatar:"/assets/avatars/avatar-anika-visser.png",city:"Madrid",country:"Spain",currency:"$",email:"anika.visser@devias.io",hasAcceptedMarketing:!0,isProspect:!1,isReturning:!0,name:"Anika Visser",state:"Madrid",totalSpent:500,totalOrders:1,updatedAt:(0,i.Z)((0,c.Z)(d,11),2).getTime()},{id:"5e86805e2bafd54f66cc95c3",avatar:"/assets/avatars/avatar-miron-vitold.png",city:"San Diego",country:"USA",currency:"$",email:"miron.vitold@devias.io",hasAcceptedMarketing:!0,isProspect:!0,isReturning:!1,name:"Miron Vitold",totalSpent:0,totalOrders:0,state:"California",updatedAt:(0,i.Z)((0,c.Z)(d,7),3).getTime()},{id:"5e887a1fbefd7938eea9c981",avatar:"/assets/avatars/avatar-penjani-inyene.png",city:"Berkeley",country:"USA",currency:"$",email:"penjani.inyene@devias.io",hasAcceptedMarketing:!1,isProspect:!0,isReturning:!1,name:"Penjani Inyene",state:"California",totalSpent:0,totalOrders:0,updatedAt:(0,i.Z)((0,c.Z)(d,5),4).getTime()},{id:"5e887d0b3d090c1b8f162003",avatar:"/assets/avatars/avatar-omar-darboe.png",currency:"$",email:"omar.darobe@devias.io",hasAcceptedMarketing:!0,isProspect:!1,isReturning:!1,city:"Carson City",country:"USA",name:"Omar Darobe",state:"Nevada",totalSpent:100,totalOrders:4,updatedAt:(0,i.Z)((0,c.Z)(d,15),4).getTime()},{id:"5e88792be2d4cfb4bf0971d9",avatar:"/assets/avatars/avatar-siegbert-gottfried.png",city:"Los Angeles",country:"USA",currency:"$",email:"siegbert.gottfried@devias.io",hasAcceptedMarketing:!0,isProspect:!1,isReturning:!0,name:"Siegbert Gottfried",state:"California",totalSpent:1e3,totalOrders:2,updatedAt:(0,i.Z)((0,c.Z)(d,2),5).getTime()},{id:"5e8877da9a65442b11551975",avatar:"/assets/avatars/avatar-iulia-albu.png",city:"Murray",country:"USA",email:"iulia.albu@devias.io",hasAcceptedMarketing:!0,isProspect:!0,isReturning:!1,name:"Iulia Albu",state:"Utah",totalSpent:0,totalOrders:0,updatedAt:(0,i.Z)((0,c.Z)(d,8),6).getTime()},{id:"5e8680e60cba5019c5ca6fda",avatar:"/assets/avatars/avatar-nasimiyu-danai.png",city:"Salt Lake City",country:"USA",currency:"$",email:"nasimiyu.danai@devias.io",hasAcceptedMarketing:!1,isProspect:!1,isReturning:!0,name:"Nasimiyu Danai",state:"Utah",totalSpent:200,totalOrders:7,updatedAt:(0,i.Z)((0,c.Z)(d,1),9).getTime()}],p={id:"5e86805e2bafd54f66cc95c3",address1:"Street John Wick, no. 7",address2:"House #25",avatar:"/assets/avatars/avatar-miron-vitold.png",balance:0,city:"San Diego",country:"USA",currency:"$",email:"miron.vitold@devias.io",hasDiscount:!1,isVerified:!0,name:"Miron Vitold",phone:"+55 748 327 439",state:"New York",vatRate:19,zipCode:"240355"},h=[{id:"5ece2ce3613486d95ffaea58",createdAt:(0,i.Z)((0,c.Z)((0,o.Z)(d,34),5),3).getTime(),description:"Order confirmation"},{id:"5ece2ce8cebf7ad1d100c0cd",createdAt:(0,i.Z)((0,c.Z)((0,o.Z)(d,49),11),4).getTime(),description:"Order confirmation"}],g=[{id:"528651571NT",issueDate:d.getTime(),status:"paid",amount:1358.75},{id:"311658671JR",issueDate:d.getTime(),status:"unpaid",amount:1451.75}],m=[{id:"5ece2cfeb6e2ac847bba11ce",createdAt:(0,i.Z)((0,o.Z)((0,l.Z)(d,56),2),2).getTime(),description:"Purchase",ip:"84.234.243.42",method:"POST",route:"/api/purchase",status:200},{id:"5ece2d02510484b2952e1e05",createdAt:(0,i.Z)((0,o.Z)((0,l.Z)(d,56),2),2).getTime(),description:"Purchase",ip:"84.234.243.42",method:"POST",route:"/api/purchase",status:522},{id:"5ece2d08e2748e4e9788901a",createdAt:(0,i.Z)((0,o.Z)((0,l.Z)(d,23),8),2).getTime(),description:"Cart remove",ip:"84.234.243.42",method:"DELETE",route:"/api/products/d65654e/remove",status:200},{id:"5ece2d0c47214e342c2d7f28",createdAt:(0,i.Z)((0,o.Z)((0,l.Z)(d,54),20),2).getTime(),description:"Cart add",ip:"84.234.243.42",method:"GET",route:"/api/products/d65654e/add",status:200},{id:"5ece2d11e4060a97b2b57623",createdAt:(0,i.Z)((0,o.Z)((0,l.Z)(d,16),34),2).getTime(),description:"Cart add",ip:"84.234.243.42",method:"GET",route:"/api/products/c85727f/add",status:200},{id:"5ece2d16cf6d53d8e33656af",createdAt:(0,i.Z)((0,o.Z)((0,l.Z)(d,30),54),2).getTime(),description:"View product",ip:"84.234.243.42",method:"GET",route:"/api/products/c85727f",status:200},{id:"5ece2d1b2ec5071be9286a96",createdAt:(0,i.Z)((0,o.Z)((0,l.Z)(d,40),56),2).getTime(),description:"Get products",ip:"84.234.243.42",method:"GET",route:"/api/products",status:200},{id:"5ece2d22e68d5498917e47bc",createdAt:(0,i.Z)((0,o.Z)((0,l.Z)(d,5),57),2).getTime(),description:"Login",ip:"84.234.243.42",method:"POST",route:"/api/auth/login",status:200}],v=new class{getCustomers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{filters:t,page:a,rowsPerPage:i,sortBy:c,sortDir:o}=e,l=(0,s.p)(u),d=l.length;return void 0!==t&&(d=(l=l.filter(e=>{if(void 0!==t.query&&""!==t.query){let a=!1;if(["email","name"].forEach(r=>{e[r].toLowerCase().includes(t.query.toLowerCase())&&(a=!0)}),!a)return!1}return(void 0===t.hasAcceptedMarketing||e.hasAcceptedMarketing===t.hasAcceptedMarketing)&&(void 0===t.isProspect||e.isProspect===t.isProspect)&&(void 0===t.isReturning||e.isReturning===t.isReturning)})).length),void 0!==c&&void 0!==o&&(l=(0,n.v)(l,c,o)),void 0!==a&&void 0!==i&&(l=(0,r.i)(l,a,i)),Promise.resolve({data:l,count:d})}getCustomer(e){return Promise.resolve((0,s.p)(p))}getEmails(e){return Promise.resolve((0,s.p)(h))}getInvoices(e){return Promise.resolve((0,s.p)(g))}getLogs(e){return Promise.resolve((0,s.p)(m))}}},59401:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var r=a(67294);let n=()=>{let e=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),(0,r.useCallback)(()=>e.current,[])}},48050:function(e,t,a){"use strict";a.d(t,{a:function(){return s}});var r=a(67294),n=a(12808);let s=()=>{(0,r.useEffect)(()=>{n.w.push({event:"page_view"})},[])}},9091:function(e,t,a){"use strict";a.d(t,{r:function(){return n}});var r=a(67294);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=(0,r.useRef)(!0);(0,r.useEffect)(()=>{if(!a.current)return e();a.current=!1},t)}},9829:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return er}});var r=a(85893),n=a(67294),s=a(25308),i=a(10216),c=a(2957),o=a(87357),l=a(11057),d=a(66242),u=a(65582),p=a(51233),h=a(53219),g=a(15861),m=a(70450),v=a(8425),Z=a(59401),f=a(48050);let x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,a]=(0,n.useState)([]);(0,n.useEffect)(()=>{a([])},[e]);let r=(0,n.useCallback)(()=>{a([...e])},[e]),s=(0,n.useCallback)(e=>{a(t=>[...t,e])},[]),i=(0,n.useCallback)(()=>{a([])},[]),c=(0,n.useCallback)(e=>{a(t=>t.filter(t=>t!==e))},[]);return{handleDeselectAll:i,handleDeselectOne:c,handleSelectAll:r,handleSelectOne:s,selected:t}};var b=a(8493),j=a(45697),y=a.n(j),A=a(95226),C=a(67720),P=a(87109),k=a(57709),S=a(40044),w=a(86517),T=a(93155),O=a(9091);let D=[{label:"All",value:"all"},{label:"Accepts Marketing",value:"hasAcceptedMarketing"},{label:"Prospect",value:"isProspect"},{label:"Returning",value:"isReturning"}],R=[{label:"Last update (newest)",value:"updatedAt|desc"},{label:"Last update (oldest)",value:"updatedAt|asc"},{label:"Total orders (highest)",value:"totalOrders|desc"},{label:"Total orders (lowest)",value:"totalOrders|asc"}],M=e=>{let{onFiltersChange:t,onSortChange:a,sortBy:s,sortDir:i}=e,c=(0,n.useRef)(null),[l,d]=(0,n.useState)("all"),[u,g]=(0,n.useState)({}),m=(0,n.useCallback)(()=>{null==t||t(u)},[u,t]);(0,O.r)(()=>{m()},[u,m]);let v=(0,n.useCallback)((e,t)=>{d(t),g(e=>{let a={...e,hasAcceptedMarketing:void 0,isProspect:void 0,isReturning:void 0};return"all"!==t&&(a[t]=!0),a})},[]),Z=(0,n.useCallback)(e=>{e.preventDefault(),g(e=>{var t;return{...e,query:null===(t=c.current)||void 0===t?void 0:t.value}})},[]),f=(0,n.useCallback)(e=>{let[t,r]=e.target.value.split("|");null==a||a({sortBy:t,sortDir:r})},[a]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{indicatorColor:"primary",onChange:v,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:l,variant:"scrollable",children:D.map(e=>(0,r.jsx)(S.Z,{label:e.label,value:e.value},e.value))}),(0,r.jsx)(C.Z,{}),(0,r.jsxs)(p.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:3,sx:{p:3},children:[(0,r.jsx)(o.Z,{component:"form",onSubmit:Z,sx:{flexGrow:1},children:(0,r.jsx)(k.Z,{defaultValue:"",fullWidth:!0,inputProps:{ref:c},placeholder:"Search customers",startAdornment:(0,r.jsx)(P.Z,{position:"start",children:(0,r.jsx)(h.Z,{children:(0,r.jsx)(A.Z,{})})})})}),(0,r.jsx)(T.Z,{label:"Sort By",name:"sort",onChange:f,select:!0,SelectProps:{native:!0},value:"".concat(s,"|").concat(i),children:R.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})};M.propTypes={onFiltersChange:y().func,onSortChange:y().func,sortBy:y().string,sortDir:y().oneOf(["asc","desc"])};var E=a(92077),I=a.n(E),L=a(94723),U=a(76585),_=a(87952),N=a(69368),$=a(93946),z=a(23795),B=a(7906),G=a(295),F=a(98102),V=a(53184),q=a(8896),W=a(53816),H=a(83172),J=a(78777),Q=a(45025),X=a(59586);let Y=e=>{let{count:t=0,items:a=[],onDeselectAll:n,onDeselectOne:s,onPageChange:i=()=>{},onRowsPerPageChange:c,onSelectAll:d,onSelectOne:u,page:m=0,rowsPerPage:v=0,selected:Z=[]}=e,f=Z.length>0&&Z.length<a.length,x=a.length>0&&Z.length===a.length,b=Z.length>0;return(0,r.jsxs)(o.Z,{sx:{position:"relative"},children:[b&&(0,r.jsxs)(p.Z,{direction:"row",spacing:2,sx:{alignItems:"center",backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"neutral.50",display:b?"flex":"none",position:"absolute",top:0,left:0,width:"100%",px:2,py:.5,zIndex:10},children:[(0,r.jsx)(N.Z,{checked:x,indeterminate:f,onChange:e=>{e.target.checked?null==d||d():null==n||n()}}),(0,r.jsx)(l.Z,{color:"inherit",size:"small",children:"Delete"}),(0,r.jsx)(l.Z,{color:"inherit",size:"small",children:"Edit"})]}),(0,r.jsx)(J.L,{children:(0,r.jsxs)(B.Z,{sx:{minWidth:700},children:[(0,r.jsx)(V.Z,{children:(0,r.jsxs)(W.Z,{children:[(0,r.jsx)(F.Z,{padding:"checkbox",children:(0,r.jsx)(N.Z,{checked:x,indeterminate:f,onChange:e=>{e.target.checked?null==d||d():null==n||n()}})}),(0,r.jsx)(F.Z,{children:"Name"}),(0,r.jsx)(F.Z,{children:"Location"}),(0,r.jsx)(F.Z,{children:"Orders"}),(0,r.jsx)(F.Z,{children:"Spent"}),(0,r.jsx)(F.Z,{align:"right",children:"Actions"})]})}),(0,r.jsx)(G.Z,{children:a.map(e=>{let t=Z.includes(e.id),a="".concat(e.city,", ").concat(e.state,", ").concat(e.country),n=I()(e.totalSpent).format("".concat(e.currency,"0,0.00"));return(0,r.jsxs)(W.Z,{hover:!0,selected:t,children:[(0,r.jsx)(F.Z,{padding:"checkbox",children:(0,r.jsx)(N.Z,{checked:t,onChange:t=>{t.target.checked?null==u||u(e.id):null==s||s(e.id)},value:t})}),(0,r.jsx)(F.Z,{children:(0,r.jsxs)(p.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,r.jsx)(_.Z,{src:e.avatar,sx:{height:42,width:42},children:(0,X.Q)(e.name)}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z.Z,{color:"inherit",component:H.r,href:Q.H.dashboard.customers.details,variant:"subtitle2",children:e.name}),(0,r.jsx)(g.Z,{color:"text.secondary",variant:"body2",children:e.email})]})]})}),(0,r.jsx)(F.Z,{children:a}),(0,r.jsx)(F.Z,{children:e.totalOrders}),(0,r.jsx)(F.Z,{children:(0,r.jsx)(g.Z,{variant:"subtitle2",children:n})}),(0,r.jsxs)(F.Z,{align:"right",children:[(0,r.jsx)($.Z,{component:H.r,href:Q.H.dashboard.customers.edit,children:(0,r.jsx)(h.Z,{children:(0,r.jsx)(U.Z,{})})}),(0,r.jsx)($.Z,{component:H.r,href:Q.H.dashboard.customers.details,children:(0,r.jsx)(h.Z,{children:(0,r.jsx)(L.Z,{})})})]})]},e.id)})})]})}),(0,r.jsx)(q.Z,{component:"div",count:t,onPageChange:i,onRowsPerPageChange:c,page:m,rowsPerPage:v,rowsPerPageOptions:[5,10,25]})]})};Y.propTypes={count:y().number,items:y().array,onDeselectAll:y().func,onDeselectOne:y().func,onPageChange:y().func,onRowsPerPageChange:y().func,onSelectAll:y().func,onSelectOne:y().func,page:y().number,rowsPerPage:y().number,selected:y().array};let K=()=>{let[e,t]=(0,n.useState)({filters:{query:void 0,hasAcceptedMarketing:void 0,isProspect:void 0,isReturning:void 0},page:0,rowsPerPage:5,sortBy:"updatedAt",sortDir:"desc"}),a=(0,n.useCallback)(e=>{t(t=>({...t,filters:e}))},[]),r=(0,n.useCallback)(e=>{t(t=>({...t,sortBy:e.sortBy,sortDir:e.sortDir}))},[]),s=(0,n.useCallback)((e,a)=>{t(e=>({...e,page:a}))},[]),i=(0,n.useCallback)(e=>{t(t=>({...t,rowsPerPage:parseInt(e.target.value,10)}))},[]);return{handleFiltersChange:a,handleSortChange:r,handlePageChange:s,handleRowsPerPageChange:i,state:e}},ee=e=>{let t=(0,Z.s)(),[a,r]=(0,n.useState)({customers:[],customersCount:0}),s=(0,n.useCallback)(async()=>{try{let a=await m.v.getCustomers(e);t()&&r({customers:a.data,customersCount:a.count})}catch(e){console.error(e)}},[e,t]);return(0,n.useEffect)(()=>{s()},[e]),{...a}},et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,n.useMemo)(()=>e.map(e=>e.id),[e])},ea=()=>{let e=K(),t=ee(e.state),a=et(t.customers),n=x(a);return(0,f.a)(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.p,{title:"Dashboard: Customer List"}),(0,r.jsx)(o.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,r.jsx)(u.Z,{maxWidth:"xl",children:(0,r.jsxs)(p.Z,{spacing:4,children:[(0,r.jsxs)(p.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,r.jsxs)(p.Z,{spacing:1,children:[(0,r.jsx)(g.Z,{variant:"h4",children:"Customers"}),(0,r.jsxs)(p.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,r.jsx)(l.Z,{color:"inherit",size:"small",startIcon:(0,r.jsx)(h.Z,{children:(0,r.jsx)(c.Z,{})}),children:"Import"}),(0,r.jsx)(l.Z,{color:"inherit",size:"small",startIcon:(0,r.jsx)(h.Z,{children:(0,r.jsx)(s.Z,{})}),children:"Export"})]})]}),(0,r.jsx)(p.Z,{alignItems:"center",direction:"row",spacing:3,children:(0,r.jsx)(l.Z,{startIcon:(0,r.jsx)(h.Z,{children:(0,r.jsx)(i.Z,{})}),variant:"contained",children:"Add"})})]}),(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(M,{onFiltersChange:e.handleFiltersChange,onSortChange:e.handleSortChange,sortBy:e.state.sortBy,sortDir:e.state.sortDir}),(0,r.jsx)(Y,{count:t.customersCount,items:t.customers,onDeselectAll:n.handleDeselectAll,onDeselectOne:n.handleDeselectOne,onPageChange:e.handlePageChange,onRowsPerPageChange:e.handleRowsPerPageChange,onSelectAll:n.handleSelectAll,onSelectOne:n.handleSelectOne,page:e.state.page,rowsPerPage:e.state.rowsPerPage,selected:n.selected})]})]})})})]})};ea.getLayout=e=>(0,r.jsx)(b.A,{children:e});var er=ea},79643:function(e,t,a){"use strict";function r(e,t,a){return e.slice(t*a,t*a+a)}a.d(t,{i:function(){return r}})},72486:function(e,t,a){"use strict";function r(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function n(e,t,a){let n="desc"===a?(e,a)=>r(e,a,t):(e,a)=>-r(e,a,t),s=e.map((e,t)=>[e,t]);return s.sort((e,t)=>{let a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]}),s.map(e=>e[0])}a.d(t,{v:function(){return n}})},35634:function(e,t,a){"use strict";a.d(t,{p:function(){return function e(t){return"object"!=typeof t||null===t?t:t instanceof Date?new Date(t.getTime()):t instanceof Array?t.reduce((t,a,r)=>(t[r]=e(a),t),[]):t instanceof Object?Object.keys(t).reduce((a,r)=>(a[r]=e(t[r]),a),{}):void 0}}})},59586:function(e,t,a){"use strict";a.d(t,{Q:function(){return r}});let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\s+/," ").split(" ").slice(0,2).map(e=>e&&e[0].toUpperCase()).join("")}}},function(e){e.O(0,[4310,8471,7176,3155,3852,3473,4411,209,7974,2077,7375,148,8896,1652,865,9774,2888,179],function(){return e(e.s=68039)}),_N_E=e.O()}]);